

## 一、介绍

* 目的
  * 从事Python开发工程师岗位。
  * 作为其他岗位的附加技能。
* 特点
  * 综合：装饰器、类、MySQL数据库、Redis数据库、进程、线程、协程、Django框架、Web前端、django-redis、django对事物支持、Celery框架、第三方短信平台、第三方登录平台、第三方支付平台... ...
  * 代码量相对较大，排错相对困难
  * 根据实战性：依据API文档进行开发







* base64编码后的长度一定是4的倍数
* base64编码后的结果末尾可能会有 0个、1个、2个 等于号

<font color=red>base64模块中所有方法的参数和结果都是字节串，项目中一旦使用base64编码，一定要注意 encode() 和 decode() 使用！</font>



#### http://127.0.0.1:8000?username=xxxxx



#### 1f0d64c90600ebe440c96f465841ce57

#### 7f9fc2fd1e04d10c6b37aa769625990a



* base64
* sha256
* hmac-sha256

```python
b'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VybmFtZSI6Imd1b3hpYW9uYW8iLCJpc3MiOiJnZ2cifQ.Zzg1u55DCBqPRGf9z3-NAn4kbA-MJN83SxyLFfc5mmM'
```

#### 

* json模块

  * json.loads()

    ```python
    '{"alg": "HS256"}' --> {"alg": "HS256"}
    string   ----->   dict
    ```

  * json.dumps()

    ```python
    {"alg": "HS256"}  -->'{"alg": "HS256"}'
    dict     ------>   string
    ```

    

1. encode()  ： string  -->   bytes
2. decode() ：  bytes  -->   string
3. loads()     :     string/bytes  -->  dict
4. dumps()  :     dict     -->   string



{"exp": xxx, "username": xxx}





#### JWT三部分

* header：{"alg": "HS256", "typ": "JWT"}

  对该部分进行base64编码!

* payload: {"exp": xxx, "username": xxx}

  对该部分进行base64编码!

* sign

  1. 对前两部分的和进行hmac-sha256加密；
  2. 再对加密后的结果进行base64编码.



```python
try:
    payload = jwt.decode(token, key, ...)
    # 执行业务逻辑
except:
    # token有问题
    # 让用户重新登录!!!
    pass
```





地址：http://127.0.0.1:80/index.html

寻址：/var/www/html/index.html



地址：http://127.0.0.1:80/dadshop/templates/login.html

寻址：/var/www/html/dadshop/templates/login.html





* 创建nginx的配置文件 dadashop.conf

  sudo gedit /etc/nginx/conf.d/dadashop.conf

  ```python
  server {
          
          listen 7000 default_server;
          listen [::]:7000 default_server;
          server_name __;
  
          root /var/www/html;
          # Add index.php to the list if you are using PHP
          index index.html index.htm index.nginx-debian.html;
  
          location / {
                  # First attempt to serve request as file, then
                  # as directory, then fall back to displaying a 404.
                  try_files $uri $uri/ =404;
          }
  }
  ```

  **sudo /etc/init.d/nginx restart**

* 创建目录：/var/www/html/dadashop

  sudo mkdir /var/www/html/dadashop/

* 拷贝文件

  到能看到client文件夹的路径，执行复制：

  sudo cp -fr client/.  /var/www/html/dadashop/

* 浏览器测试

  http://127.0.0.1:7000/dadashop/templates/index.html





